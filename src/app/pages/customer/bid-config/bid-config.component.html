<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <div class="card">
                <div class="card-header">
                    <div class="row">
                        <div class="col-lg-12">
                            <h5 class="d-inline">Quản lý nick đấu giá</h5>
                            <!-- <div class="refreshPage" (click)="refreshPage()">
                                <i class="fa fa-refresh"></i>
                            </div> -->
                        </div>
                    </div>
                </div>
                <div class="row mt-2 mb-2">
                    <div class="col-lg-12">
                        <div class="row mt-2">
                            <div *ngFor="let item of groupkeyList" class="col-lg-4">
                                <div class="card" style="
                                margin-left: 10px;">
                                    <div [class]="item.isReady?'card-header b-l-success border-3 badge-success':'card-header b-l-danger border-3 badge-danger'"
                                        [ngStyle]="{'background-color':item.isReady?'#00c292':'#FF5370'}">
                                        <h5>{{item.id}}</h5>
                                    </div>
                                    <div class="card-body">
                                        <table class="table table-bordered table-striped">
                                            <tr>
                                                <td>Cập nhật lần cuối</td>
                                                <td [ngStyle]="{'color':item.isReady?'#00c292':'#FF5370'}">
                                                    {{item.updatedDate | date : 'dd/MM/yyyy HH:mm:ss'}}
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>Tổng tài khoản hiện có</td>
                                                <td class="orange">{{item.totalAccount}}</td>
                                            </tr>
                                            <tr>
                                                <td>Tổng tài khoản đang hoạt động</td>
                                                <td style="color:#00c292">{{item.totalAccountActive}}</td>
                                            </tr>
                                            <tr>
                                                <td>Tổng tài khoản không hoạt động</td>
                                                <td style="color:#FF5370">{{item.totalAccountUnActive}}</td>
                                            </tr>
                                            <tr>
                                                <td>Tổng tài khoản đang cho phép đấu giá</td>
                                                <td style="color:#00c292">{{item.totalAccountAllowBid}}</td>
                                            </tr>
                                            <tr>
                                                <td>Tổng tài khoản dừng cho phép đấu giá</td>
                                                <td style="color:#FF5370">{{item.totalAccountNotAllowBid}}</td>
                                            </tr>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
                <div class="search-box" style="margin: 10px;">
                    <div class="card-body">
                        <div id="collapseSearch">
                            <!-- BEGIN Form Filter -->
                            <form>
                                <div class="col-md-12 form-inline mb-1">
                                    <div class="col-md-3 no-padding">
                                        <div class="form-group">
                                            <div class="col-md-12">
                                                <ng-select [items]="supplierList" [virtualScroll]="true"
                                                    (change)="onGetAll()" name="buyer" bindLabel="name"
                                                    bindValue="accountId" [(ngModel)]="bidConfigSearchRequest.buyer"
                                                    placeholder="Người mua">
                                                </ng-select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-3 no-padding">
                                        <div class="form-group">
                                            <div class="col-md-12">
                                                <ng-select [items]="nickList" [virtualScroll]="true"
                                                    (change)="onGetAll()" name="username" bindLabel="item"
                                                    bindValue="item" placeholder="Nick đấu..."
                                                    [(ngModel)]="bidConfigSearchRequest.username">
                                                </ng-select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-3 no-padding">
                                        <div class="form-group">
                                            <div class="col-md-12">
                                                <ng-select [items]="groupkeyList" [virtualScroll]="true"
                                                    (change)="onGetAll()" name="groupKey" bindLabel="id" bindValue="id"
                                                    [(ngModel)]="bidConfigSearchRequest.groupKey" placeholder="Nhóm...">
                                                </ng-select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-3 no-padding">
                                        <div class="form-group">
                                            <div class="col-md-12">
                                                <div class="input-group">
                                                    <input type="text" class="form-control" name="note"
                                                        (change)="onGetAll()" [(ngModel)]="bidConfigSearchRequest.note"
                                                        placeholder="Ghi chú...">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-12 form-inline mb-1">
                                    <div class="col-md-3 no-padding">
                                        <div class="form-group">
                                            <div class="col-md-12">
                                                <ng-select [items]="accounts" (change)="onGetAll()" bindLabel="name"
                                                    bindValue="id" [(ngModel)]="bidConfigSearchRequest.isAccountReady"
                                                    name="isAccountReady" placeholder="Trạng thái tài khoản...">
                                                </ng-select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-3 no-padding">
                                        <div class="form-group">
                                            <div class="col-md-12">
                                                <ng-select [items]="allowBids" (change)="onGetAll()" bindLabel="name"
                                                    [(ngModel)]="bidConfigSearchRequest.isAllowBid" bindValue="id"
                                                    name="isAllowBid" placeholder="Trạng thái đấu giá...">
                                                </ng-select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-3 no-padding">
                                        <div class="form-group">
                                            <div class="col-md-12">
                                                <div class="input-group">
                                                    <input type="text" class="form-control" name="alias"
                                                        (change)="onGetAll()" [(ngModel)]="bidConfigSearchRequest.alias"
                                                        placeholder="Alias...">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-3 no-padding">
                                        <div class="form-group">
                                            <div class="col-md-12">
                                                <ng-select [items]="listStatus" [virtualScroll]="true"
                                                    (change)="onGetAll()" name="status" bindLabel="name"
                                                    bindValue="status" [(ngModel)]="bidConfigSearchRequest.status"
                                                    placeholder="Trạng thái">
                                                </ng-select>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </form>
                            <!-- END Form Filter -->
                        </div>
                    </div>
                </div>

                <div class="card-body">
                    <div class="row mb-2">
                        <div class="col-lg-12">
                            <table class="table table-borded">
                                <thead class="">
                                    <tr class=" height-title">
                                        <th class="w5p "></th>
                                        <th class="w10p ">Nicsk đấu</th>
                                        <th class="w10p ">Alias</th>
                                        <th class="w10p ">Nhóm</th>
                                        <th class="w8p ">Ngày tạo</th>
                                        <th class="w10p ">Người mua</th>
                                        <th class="w5p ">Trạng thái</th>
                                        <th class="w10p ">Ghi chú</th>
                                        <th class="w10p "></th>
                                    </tr>
                                </thead>
                                <tbody class="">
                                    <tr>
                                        <td colspan="8"></td>
                                        <td class="w5p text-center">
                                            <button class="btn btn-success m-r-5" (click)="onOpenModalAddBuyerConfig()">
                                                <i class="fa fa-plus"></i>
                                            </button>
                                        </td>
                                    </tr>
                                    <tr *ngFor="let item of bidConfigModel| paginate: {
                                        id:'pagingControl',
                                        itemsPerPage: pageSize,
                                        currentPage: pageIndex,
                                        totalItems: totalRow
                                        };let i = index">
                                        <!-- (contextmenu)="open($event, item); $event. preventDefault();" -->
                                        <td class="">
                                            <span *ngIf="item.isServiceReady == false" _ngcontent-c7=""
                                                class="badge badge-danger" ngbTooltip="Trạng thái"
                                                ng-reflect-ngb-tooltip="Mô tả">Chưa sẵn sàng</span>
                                            <span *ngIf="item.isServiceReady == true" _ngcontent-c7=""
                                                class="badge badge-success" ngbTooltip="Trạng thái"
                                                ng-reflect-ngb-tooltip="Mô tả">Sẵn sàng</span>
                                            <span *ngIf="item.isAllowBid != true" _ngcontent-c7=""
                                                class="badge badge-danger" ngbTooltip="Trạng thái"
                                                ng-reflect-ngb-tooltip="Dừng cho phép đấu giá">Dừng cho phép đấu
                                                giá</span>
                                            <span *ngIf="item.isAllowBid == true" _ngcontent-c7=""
                                                class="badge badge-success" ngbTooltip="Trạng thái"
                                                ng-reflect-ngb-tooltip="Cho phép đấu giá">Cho phép đấu giá</span>
                                            <span *ngIf="item.isAccHadInSystem != null" _ngcontent-c7=""
                                                class="badge badge-danger" ngbTooltip="Trạng thái"
                                                ng-reflect-ngb-tooltip="Chưa cấu hình hệ thống">Chưa cấu hình hệ
                                                thống</span>
                                        </td>
                                        <td class="">
                                            {{item.username}}
                                        </td>
                                        <td class="">
                                            {{item.alias}}
                                        </td>
                                        <td class="">
                                            {{item.groupKey}}
                                        </td>
                                        <td class="">
                                            {{item.createdDateDisPlay}}
                                        </td>
                                        <td class="">
                                            {{item.buyerDisplay}}
                                        </td>
                                        <td class="">
                                            <span *ngIf="item.status == 1" _ngcontent-c7="" class="badge badge-success"
                                                ngbTooltip="Trạng thái" ng-reflect-ngb-tooltip="Mô tả">Active</span>
                                            <span *ngIf="item.status == 0" _ngcontent-c7="" class="badge badge-warning"
                                                ngbTooltip="Trạng thái" ng-reflect-ngb-tooltip="Mô tả">Chưa
                                                active</span>
                                        </td>
                                        <td class="">
                                            {{item.note}}
                                        </td>
                                        <td class="w5p text-center">
                                            <button class="btn btn-primary btn-sm m-r-5"
                                                (click)="onOpenModalUpdateBuyerConfig(item)">
                                                <i class="fa fa-edit font-btn"></i>
                                            </button>
                                            <button class="btn btn-danger btn-sm" (click)="onDelete(item)">
                                                <i class="fa fa-trash-o font-btn"></i>
                                            </button>
                                        </td>
                                        <!-- <ng-template #userMenu let-user>
                                            <section class="user-menu">
                                                <div (click)="onAdd()"><i class="fa fa-user"></i>  Thêm mới</div>
                                                <div (click)="onUpdate(item)"><i class="fa fa-edit"></i>  Chỉnh sửa thông tin</div>
                                            </section>
                                        </ng-template> -->
                                    </tr>
                                </tbody>
                            </table>
                            <pagination-controls maxSize="9" responsive="true" autoHide="true"
                                previousLabel="Trang trước" nextLabel="Trang tiếp" id="pagingControl"
                                (pageChange)="pageChanged($event)">
                            </pagination-controls>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>